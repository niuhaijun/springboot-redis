## 1、内存回收
* Redis在自己的对象系统中构建了一个`引用计数器技术`来实现内存回收机制
* 对象的`引用计数refcount`信息会随着对象的使用状态而不断变化，当refcount为`0`时会在适当的时候被回收
* 引用计数器的问题：对象间`循环引用`会导致无法释放对象
* redis只对包含整数值的字符串对象进行`共享`，Redis在初始化服务器时，会创建一万个共享字符串对象，如"0", "1", ..., "9999"
---
## 2、过期键的删除策略
* Redis的过期键删除策略：`惰性删除` + `定期删除`
* `定时删除`属于`主动删除`，`惰性删除`和`定期删除`属于`被动删除`
* 1、定时删除
  * 在设置KEY的过期时间的同时，还创建了一个`定时器（timer）`，让定时器在键的过期时间来临时，立即执行对KEY的删除操作。
  * 对内存是最友好的，对CPU时间是最不友好的
* 2、定期删除
  * 每隔一段时间，程序就对数据库进行一次检查，删除里面的过期键。
  * 兼顾了内存和CPU时间，但是很难确定执行删除操作的`时长`和`频率`
* 3、惰性删除
  * 每次从`键空间`中获取键时，都检查取得的键是否过期，如果过期的话就删除，否则就返回该键
  * 对内存是最不友好的，对CPU时间是最友好的
---
## 3、数据库
* 数据库主要由`dict字典`和`expires字典`构成，dict字典负责保存键值对，expires负责保存键的过期时间

